<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Semakin Murah</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <link rel="icon"  type="image/png"  href="assets/img/semmur.png">
        <link href='http://fonts.googleapis.com/css?family=Sniglet' rel='stylesheet' type='text/css'>
        
        <link rel="stylesheet" href="assets/css/bootstrap.css">
        <link href="assets/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="assets/css/main.css">
        
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        
        <script src="assets/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
        <style>
        #mapCanvas {
        	width:100%;
        	height: 230px;
        	float: left;border-radius: 10px; border:1px solid #becede; 
          }
          
          #mapCanvas img
          {
          	max-width:none;
          }
        </style>
    </head>
    
    <body style="font-family:Sniglet; font-size:12px;">
    <div id="fb-root"></div>
    
    <!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#" style="color:#fff;"><img style="margin-top:-5px; " src="assets/img/semmur.png"> semmur.com</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li>
            	<a href="#" class="newProduk btn btn-lg btn-success"><i class="fa fa-pencil-square-o"></i> Produk Baru</a>
            </li>
            <li id="LoginDiv">
            	<a href="#" class="btn btn-lg btn-info" onclick="Login()"><i class="fa fa-facebook-square"></i> Login</a>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <!-- Begin page content -->
    <div class="container">
    
    <div class="row">
    
    	<div class="col-md-8">
    		<h4>
    			<input type=text id=searchText placeholder="Cari Produk.."> 
    			<button type="submit" class="btn btn-info btn-sm" id="searchButton"><i class="fa fa-search"></i></button>
    		</h4>
    		<br>			
    		<ul class="media-list table-striped" id="wineList"></ul>
    			
      </div>
      <div class="col-md-4">

      	<div class="row">
      		<div class="col-md-12">
      		
      			<div class="panel panel-default">
      				<div class="panel-heading">
      					
      					<ul class="media-list">
      						<li class="media">
      							<img class="media-object pull-left" width=50px src="./uploads/1939256046.png" alt="Foto produk">
      							<div class="media-body text-warning">
      								<h4 class="media-heading text-warning">Indomie mie goreng instant</h4>
      								&nbsp;&nbsp;Mie goreng instant rasa iga penyet, mantab!
      							</div>
      						</li>
      					</ul>
      				
      				</div>
      				<div class="panel-body">
      				
      				<div class="row">
      		      	
      	      		<div class="col-md-6 media">
      	      			<div style="text-align:center;">
      	      				<h4 class="text-danger">Penjual pertama</h4>
      	      			</div>
      	      			<img class="media-object img-rounded pull-left" src="https://graph.facebook.com/1199497876/picture?width=48&height=48" width="48" height="48"/>
      	      			<div class="media-body text-info">
      	      				<h4 class="media-heading text-success">Wawan B. Setyawan</h4>
      	      				Rp. 1,700
      	      			</div>
      	      		</div>
      	      		<div class="col-md-6 media">
      	      			<div style="text-align:center;">
      	      				<h4 class="text-danger">Penjual kedua</h4>
      	      			</div>
      	      			<img class="media-object img-rounded pull-left" src="https://graph.facebook.com/100003400218686/picture?width=48&height=48" width="48" height="48"/>
      	      			<div class="media-body text-info">
      	      				<h4 class="media-heading text-success">Isnawan Lutfi</h4>
      	      				Rp. 1,850
      	      			</div>
      	      		</div>
      	      		
      	      		</div>
      				
      				</div>
      				<div class="panel-footer">
      					2 Penjual Termurah.
      				</div>
      			</div>
      		
      			
      		</div>
      	</div>
      
      	<div class="row">
      	
  			<div class="col-md-12">
  				<h4 class="text-success">5 besar produk dengan penjual terbanyak.</h4>
  				
  				<div id="myCarousel" class="carousel slide" data-ride="carousel" style="margin-bottom:5px;">
  		      
  		      <ol class="carousel-indicators">
  		        <li data-target="#myCarousel" data-slide-to="0"></li>
  		        <li data-target="#myCarousel" data-slide-to="1"></li>
  		        <li data-target="#myCarousel" data-slide-to="2" class="active"></li>
  		        <li data-target="#myCarousel" data-slide-to="3"></li>
		        <li data-target="#myCarousel" data-slide-to="4"></li>
  		      </ol>
  		      
  		      <div class="carousel-inner">
  		      
  		        <div class="item">
  		          <img width=120px src="uploads/1939256046.png">
  		        </div>
  		        <div class="item">
		          <img width=120px src="uploads/1939256046.png">
		        </div>
		        <div class="item">
		          <img width=120px src="uploads/1939256046.png">
		        </div>
		        <div class="item">
		          <img width=120px src="uploads/1939256046.png">
		        </div>
		        <div class="item">
		          <img width=120px src="uploads/1939256046.png">
		        </div>
  		        
  		      </div> <!-- end carousel-inner -->
  		      
  		      <a class="left carousel-control" href="#myCarousel" data-slide="prev"><span class="glyphicon glyphicon-chevron-left"></span></a>
  		      <a class="right carousel-control" href="#myCarousel" data-slide="next"><span class="glyphicon glyphicon-chevron-right"></span></a>
  		      
  		    </div> <!-- end myCarousel -->
  				
  		  </div>
  		
  		</div>
  		
  		<br><br>
  		<div class="row">
      	
			<div class="col-md-12">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
				<!-- semmur_prod_baru -->
				<ins class="adsbygoogle" style="display:inline-block;width:300px;height:600px" data-ad-client="ca-pub-8191892932255219" data-ad-slot="6376935059">
				</ins>
				<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
			</div>
			
		</div>
      
     
      
      </div>
      
      </div>

    </div>

    <div id="footer" style="margin-top:10px; padding:10px; background:#649194; color:#fff;">
    
      <div class="container">
      	<div class="row">
      		<div class="col-md-6">
      			<p>&copy; Semakin Murah, 2014</p>
      		</div>
      		<div class="col-md-6">
      			<p>
      				Semakin Murah memberikan kesempatan bagi barang dagangan Anda untuk dapat bersaing secara harga dengan dagangan milik siapapun.
      				<br>Baik grosir besar maupun pengecer dapat dengan mudah ditemukan oleh calon pembeli jika harga jual mereka lebih murah dibanding yang lain.
      				<br>Jadi mari mulai beri harga terbaik Anda disini, dan dapatkan pelanggan baru dari manapun. Sukses!
      			</p>
      		</div>
      	</div>
      </div>
      
    </div>     
    
    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Produk yang Anda jual.</h4>
          </div>
          <div class="modal-body">
          
          	<input type="hidden" id="userid" name="userid" value="">
          	<input type="hidden" id="username" name="username" value="">
          	<input type="hidden" id="email" name="email" value="">
          	
          		<div class="form-group">
          			<label for="nama">Nama Produk</label>
          			<input type="text" class="form-control" id="nama" name="nama">
          		</div>
          		<div class="form-group">
          			<label for="deskripsi">Deskripsi Singkat Produk</label> <span class="text-warning pull-right" id="count">Sisa 140 Karakter.</span>
          			<textarea class="form-control" id="deskripsi" name="deskripsi" maxlength=140></textarea>
          		</div>
          		<div class="form-group">
          			<label for="file">Foto Produk</label>
          			<div id="output"><input type=hidden id=pict value="semmur2.png"><img src="assets/img/semmur2.png"></div>
          		</div>
          		<div class="form-group">
          			<form  action="processupload.php" method="post" enctype="multipart/form-data" id="MyUploadForm"> 
          			<input name="ImageFile" id="imageInput" type="file" /> <span><button type="submit" class="btn btn-danger btn-xs" id="submit-btn">Unggah <i class="fa fa-cloud-upload"></i> </button> <img src="assets/img/loading.gif" id="loading-img" style="display:none;" alt="Please Wait"/></span>
          			</form>
          			<p class="help-block">Ukuran gambar tidak boleh lebih dari 200kb.</p>
          		</div>
          		<div>
      				<label for="lokasi">Lokasi Produk</label> <span class="text-danger pull-right">Geser <i class="fa fa-map-marker"></i> pada peta untuk menampilkan alamat.</span>
      				<div id="mapCanvas"></div>
      				<input type="text" readonly class="form-control" id="address" name="address">
      				<input type=hidden id=markerStatus>
  					<input type=hidden id=info1 name=info1>
  					<input type=hidden id=info2 name=info2>
  					
      			</div><br>
      			<div class="form-group">
  					<label for="web">Situs Toko Online Anda</label> <span class="text-info pull-right">Boleh menggunakan link dari Tokopedia, Tokobagus, Berniaga, dsb.</span>
  					<input type="text" class="form-control" id="web" name="web" value="http://">
  				</div>
  				<div class="form-group">
					<label for="harga">Harga</label>
					<input type="number" class="form-control" id="harga" name="harga">
				</div>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
            <button type="button" id="btnSave" class="btn btn-success" data-dismiss="modal">Publish</button>
           
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    
    
    
    <!-- Penjual, Modal -->
    <div class="modal fade" id="penjualModal" tabindex="-1" role="dialog" aria-labelledby="penjualModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
        
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <button type="button" id="" class="btnHarga btn btn-danger" data-dismiss="modal">Beri Harga Anda</button>
          </div>
          
          <div class="modal-body" style="background:#cecece; height:260px; overflow:auto;">
          		<h4 class="modal-title" id="penjualModalLabel">Daftar Penjual Produk : </h4>
          		<br>
          		<ul class="media-list" id="penjualList"></ul>
          </div>

        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    
    
    	<script src="assets/js/vendor/jquery-1.7.2.min.js"></script>
        <script>window.jQuery || document.write('<script src="assets/js/vendor/jquery-1.7.2.min.js"><\/script>')</script>

        <script src="assets/js/vendor/bootstrap.min.js"></script>
        <script type="text/javascript" src="assets/js/vendor/jquery.form.min.js"></script>
        
        <script type="text/javascript">

        $(document).ready(function() {
        	
        	var options = { 
        			target:   '#output',   // target element(s) to be updated with server response 
        			beforeSubmit:  beforeSubmit,  // pre-submit callback 
        			success:       afterSuccess,  // post-submit callback 
        			resetForm: true        // reset the form after successful submit 
        		}; 
        		
        	 $('#MyUploadForm').submit(function() { 
        			$(this).ajaxSubmit(options);  			
        			// always return false to prevent standard browser submit and page navigation 
        			return false; 
        		}); 
        	 
        	 
        	 
        }); 
        

        function afterSuccess()
        {
        	$('#submit-btn').show(); //hide submit button
        	$('#loading-img').hide(); //hide submit button

        }

        //function to check file size before uploading.
        function beforeSubmit(){
            //check whether browser fully supports all File API
           if (window.File && window.FileReader && window.FileList && window.Blob)
        	{
        		
        		if( !$('#imageInput').val()) //check empty input filed
        		{
        			$("#output").html("Pilih file gambar dahulu.");
        			return false
        		}
        		
        		var fsize = $('#imageInput')[0].files[0].size; //get file size
        		var ftype = $('#imageInput')[0].files[0].type; // get file type
        		

        		//allow only valid image file types 
        		switch(ftype)
                {
                    case 'image/png': case 'image/gif': case 'image/jpeg': case 'image/pjpeg':
                        break;
                    default:
                        $("#output").html("<b>"+ftype+"</b> Bukan tipe gambar yang didukung.");
        				return false
                }
        		
        		//Allowed file size is less than 1 MB (1048576)
        		if(fsize>1048576) 
        		{
        			$("#output").html("<b>"+bytesToSize(fsize) +"</b> Terlalu besar! <br />Mohon pilih gambar dengan ukuran lebih kecil.");
        			return false
        		}
        				
        		$('#loading-img').show(); //hide submit button
        		$("#output").html("");  
        	}
        	else
        	{
        		//Output error to older unsupported browsers that doesn't support HTML5 File API
        		$("#output").html("Browser Anda tidak mendukung HTML5?!");
        		return false;
        	}
        }

        //function to format bites bit.ly/19yoIPO
        function bytesToSize(bytes) {
           var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
           if (bytes == 0) return '0 Bytes';
           var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));
           return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];
        }

        </script>
        
        <script src="assets/js/main.js"></script>
        
        <script>
        $(document).ready(function() {
            var text_max = 140;
            $('#count').html('Sisa <strong>'+ text_max + '</strong> Karakter.');

            $('#deskripsi').keyup(function() {
                var text_length = $('#deskripsi').val().length;
                var text_remaining = text_max - text_length;

                $('#count').html('Sisa <strong>'+ text_remaining + '</strong> Karakter.');
            });
            
        });
        
        
        $( 'body' ).delegate( '.newProduk', 'click', function() {
        	var anda = $('#userid').val();
        	if(anda==""){
        		Login();
        	}else{
        		$('#nama').val('');
        		$('#deskripsi').val('');
        		$('#web').val('http://');
        		$('#harga').val('');
        		$('#output').html('<input type=hidden id=pict value="semmur2.png"><img src="uploads/semmur2.png">');
        		$("#nama").attr("readonly",false);
            	$("#deskripsi").attr("readonly",false);
            	$("#submit-btn").attr("disabled",false);
        		$('#myModal').modal('show');
        	}
        });
        
        
        
        $( 'body' ).delegate( '.detilWine', 'click', function() {
        	var anda = $('#userid').val();
        	if(anda==""){
        		Login();
        	}else{
        		var nama = $(this).attr('id');
            	findById(nama);
            	$("#nama").attr("readonly",true);
            	$("#deskripsi").attr("readonly",true);
            	$("#submit-btn").attr("disabled",true);
            	$('#myModal').modal('show');
        	}
        	
        });
        
        
        
        $( 'body' ).delegate( '.bukaPenjual', 'click', function() {
        	var nama = $(this).attr('id');
        	findByNama(nama);
        	$('#penjualModal').modal('show');
        	$('.btnHarga').attr( 'id', nama);
        });
        
        
        
        $( 'body' ).delegate( '.btnHarga', 'click', function() {
        	var anda = $('#userid').val();
        	if(anda==""){
        		Login();
        	}else{
        		var nama = $(this).attr('id');
            	findById(nama);
            	$("#nama").attr("readonly",true);
            	$("#deskripsi").attr("readonly",true);
            	$("#submit-btn").attr("disabled",true);
            	$('#myModal').modal('show');
        	}
        	
        });
        
            </script>
            
        <script>
        
        
        
        window.fbAsyncInit = function() {
          	
            FB.init({
              appId      : '452499754848153', // Set YOUR APP ID
              channelUrl : 'fb_channel.html', // Channel File
              status     : true, // check login status
              cookie     : true, // enable cookies to allow the server to access the session
              xfbml      : true  // parse XFBML
              
            });
         
            FB.Event.subscribe('auth.authResponseChange', function(response){
             	if (response.status === 'connected') 
            	{
                	//SUCCESS
              document.getElementById("LoginDiv").innerHTML = '<a href="#" class="btn btn-lg btn-danger" onclick="Logout()"><i class="fa fa-facebook-square"></i> Logout</a>';
              
            	}else if (response.status === 'not_authorized'){

                	//FAILED
              document.getElementById("LoginDiv").innerHTML = '<a href="#" class="btn btn-lg btn-info" onclick="Login()"><i class="fa fa-facebook-square"></i> Login</a>';  
              
            	}else{

                	//UNKNOWN ERROR
              document.getElementById("LoginDiv").innerHTML = '<a href="#" class="btn btn-lg btn-info" onclick="Login()"><i class="fa fa-facebook-square"></i> Login</a>';
              
            	}
            }); 
            
            FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                
        		getUserInfo();
        		findRandom2() ;
        		
            }
        });
         
        };
         
        function Login(){
         
              FB.login(function(response) {
                   if (response.authResponse) 
                   {
                   	
                        getUserInfo();
                        
                   }else{
                   	
                     console.log('User cancelled login or did not fully authorize.');
                     
                   }
               },{scope: 'email'});
         
        }
         
        function getUserInfo() {
                
                FB.api('/me', function(response) {
         
              			$('#userid').val(response.id);
              			$('#username').val(response.name);
              			$('#email').val(response.email);
                		var FBuid = parseInt($('#userid').val());
                		
                		
                    	
                    	/*function userToJSON() {
        					return JSON.stringify({
        						"oauth_uid": FBuid, 
        						"name": response.name
        					});
        				}
                    	
                    	$.ajax({
                    		type: 'GET',
        					url: "api/user/"+FBuid,
        					success: function(respon){
        						if(respon=='false'){
        							
        							$.ajax({
        								type: 'POST',
        								contentType: 'application/json',
        								url: "api/user",
        								dataType: "json",
        								data: userToJSON(),
        								success: function(data, textStatus, jqXHR){

        								},
        								error: function(jqXHR, textStatus, errorThrown){
        									//alert('addWine error: ' + textStatus);
        								}
        							});
        							
        							
        							
        						}else{
        							

        							$.ajax({
                    					type: 'PUT',
        								url: "api/user/"+FBuid
        							});
        							
        						}
                		
        					}
                    	});*/

                    	//document.getElementById("pictDiv").innerHTML ='<img class="media-object img-rounded" src="https://graph.facebook.com/'+FBuid+'/picture?width=32&height=32" width="28" height="28"/>';
                    	//document.getElementById("first_nameDiv").innerHTML = response.first_name;
                    	
         
            	});
                
                
                
        }

        /*function getPhoto(){
        	
              FB.api('/me/picture?type=normal', function(response) {
         
                  var str="<br/><b>Pic</b> : <img src='"+response.data.url+"'/>";
                  document.getElementById("status").innerHTML+=str;
         
            });
         
        }*/

        function Logout(){
        	
                FB.logout(function(){
                    
                    $('#userid').val('');
                    $('#username').val('');
                	
                	document.getElementById("LoginDiv").innerHTML ='<a href="#" class="btn btn-lg btn-info" onclick="Login()"><i class="fa fa-facebook-square"></i> Login</a> ';

                });
        }
         

          (function(d){
             var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement('script'); js.id = id; js.async = true;
             js.src = "//connect.facebook.net/en_US/all.js";
             ref.parentNode.insertBefore(js, ref);
           }(document));
         
        </script>    

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-47734211-1');ga('send','pageview');
        </script>
        
        
        <script type="text/javascript">

            var geocoder = new google.maps.Geocoder();

            function geocodePosition(pos) {
              geocoder.geocode({
                latLng: pos
              }, function(responses) {
                if (responses && responses.length > 0) {
                  updateMarkerAddress(responses[0].formatted_address);
                } else {
                  updateMarkerAddress('Lokasi tidak bisa ditemukan..');
                }
              });
            }

            function updateMarkerStatus(str) {
              document.getElementById('markerStatus').innerHTML = str;
            }

            function updateMarkerPosition(latLng) {
              document.getElementById('info1').value = latLng.lat();
               document.getElementById('info2').value = latLng.lng();
            }

            function updateMarkerAddress(str) {
              document.getElementById('address').value = str;
            }

            function initialize() {
            				
            				var latLng = new google.maps.LatLng(-6.4085295072226405, 106.96782684326172);
            		          
            		          var map = new google.maps.Map(document.getElementById('mapCanvas'), {
            		            zoom: 14,
            		            center: latLng,
            		            mapTypeId: google.maps.MapTypeId.ROADMAP
            		          });
            		          
            		          var marker = new google.maps.Marker({
            		            position: latLng,
            		            title: 'TKP',
            		            map: map,
            		            //animation: google.maps.Animation.DROP, //BOUNCE, DROP
            		            draggable: true
            		          });
            		          
            		          // Update current position info.
            		          updateMarkerPosition(latLng);
            		          geocodePosition(latLng);
            		          
            		          // Add dragging event listeners.
            		          google.maps.event.addListener(marker, 'dragstart', function() {
            		            updateMarkerAddress('Mencari...');
            		          });
            		          
            		          google.maps.event.addListener(marker, 'drag', function() {
            		            updateMarkerStatus('Mencari...');
            		            updateMarkerPosition(marker.getPosition());
            		          });
            		          
            		          google.maps.event.addListener(marker, 'dragend', function() {
            		            updateMarkerStatus('Drag ended');
            		            geocodePosition(marker.getPosition());
            		          });

            		}
            
            //google.maps.event.addDomListener(window, 'load', initialize);
            
            $('#myModal').on('shown.bs.modal', function() {
        		initialize();
            });
            
        </script>
        
    </body>
</html>